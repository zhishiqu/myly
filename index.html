<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="lib/bootstrap.min.css">
	<script type="text/javascript" src="lib/angular.min.js"></script>
	<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.min.css">
	<style type="text/css">
		.wrapper{ width: 550px; margin: 30px auto; }
		.error{ color: #a10; }   
		input.error{ border: 1px solid #a10; }  /*输入有误时，输入框边框变成红色的边框*/
		/* p.error{ display: none; } */
		.input_result{ position: relative; top: -27px; left: 520px; }
		p.success{ color: #3c763d; }
	</style>
</head>
<body ng-app="myApp" ng-controller="signUpController">
	<div class="wrapper">
		<h2 class="text-center">Login</h2>
		<form name="signUpForm" ng-submit="submitForm()">
			<div class="form-group" ng-class="{'has-success':signUpForm.username.$valid}">
				<label>Name：</label>
				<input name="username" type="text" class="form-control" ng-model="userdata.username" ng-minlength="4" ng-maxlength="16" required>
				<p class="icon-ok input_result success" ng-if="signUpForm.username.$valid"></p>
				<p class="error" ng-if="(signUpForm.username.$error.minlength || signUpForm.username.$error.maxlength) && (signUpForm.username.$touched)">
					用户名长度应在4至16位之间
				</p>
				<p class="error" ng-if="signUpForm.username.$error.required && signUpForm.username.$touched">
					用户名不可为空
				</p>
			</div>
			<div class="form-group" ng-class="{'has-success':signUpForm.password.$valid}">
				<label>password：</label>
				<input name="password" type="password" class="form-control" ng-model="userdata.password" ng-minlength="6" ng-maxlength="12" required>
				<p class="icon-ok input_result success" ng-if="signUpForm.password.$valid"></p>
				<p class="error" ng-if="signUpForm.password.$error.required && signUpForm.password.$touched">
					密码不可为空
				</p>
				<p class="error" ng-if="(signUpForm.password.$error.minlength || signUpForm.password.$error.maxlength) && signUpForm.password.$touched">
					密码长度应在6至12位之间
				</p>
			</div>
			<div class="form-group" ng-class="{'has-success':signUpForm.password2.$valid}">
				<label>password Again：</label>
				<input name="password2" type="password" class="form-control" ng-model="userdata.password2" compare="userdata.password" required >
				<p class="icon-ok input_result success" ng-if="signUpForm.password2.$valid"></p>
				<p class="error" ng-if="signUpForm.password2.$error.compare && signUpForm.password2.$touched">
					两次输入不一致
				</p>
			</div>
			<div class="form-group">
				<button class="btn btn-primary">submit</button>
			</div>
		</form>
	</div>
</body>
</html>
<script type="text/javascript">
	angular.module('myApp',[])
	.controller('signUpController',function($scope){
		$scope.userdata = {};
		$scope.submitForm =asdasdam function(){
			console.log($scope.userdata);
			if($scope.signUpForm.$invalid){
				alert('请检查您的信息')
			}else{
				alert('提交成功！')
			}
		}	
	})
	//自定义一个指令，叫compare，
	.directive('compare',function(){
		var o = {};
		//strict 的取值可以有三种：
			//A 用于元素的 Attribute，这是默认值
			//E 用于元素的名称
			//C 用于 CSS 中的 class
		o.strict = 'AE';  //严格匹配

		o.scope = {
			orgText:'=compare'   //将密码框中的合法值给了orgText
		}
		o.require = 'ngModel';

		o.link = function(sco,ele,att,con){
			con.$validators.compare = function(v){

				//console.log(v);
				//console.log(sco.orgText);
				//v 代表确认文本框的值   
				return v == sco.orgText;

			}
			sco.$watch('orgText',function(){
				con.$validate();
			});
		}
		return o;
	})
</script>









